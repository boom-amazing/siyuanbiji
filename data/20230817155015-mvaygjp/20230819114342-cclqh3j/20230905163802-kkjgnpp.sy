{"ID":"20230905163802-kkjgnpp","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230905163802-kkjgnpp","title":"RocketMq集群搭建","updated":"20230907173040"},"Children":[{"ID":"20230906171320-tycjpb5","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230906171320-tycjpb5","updated":"20230906171325"},"Children":[{"Type":"NodeText","Data":"机器"}]},{"ID":"20230906171356-iv1vwxn","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230906171356-iv1vwxn","updated":"20230906171409"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw="},{"Type":"NodeCodeBlockCode","Data":"bigdata01 192.168.93.100 \nbigdata02 192.168.93.101\nbigdata03 192.168.93.102\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230906171301-sbad7je","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230906171301-sbad7je","updated":"20230906171301"},"Children":[{"Type":"NodeText","Data":"多组节点（集群）单副本模式"}]},{"ID":"20230906171301-hhqmwxm","Type":"NodeParagraph","Properties":{"id":"20230906171301-hhqmwxm","updated":"20230906171301"},"Children":[{"Type":"NodeText","Data":"一个集群内全部部署 Master 角色，不部署Slave 副本，例如2个Master或者3个Master，这种模式的优缺点如下："}]},{"ID":"20230906171301-a1nxcbc","Type":"NodeList","ListData":{},"Properties":{"id":"20230906171301-a1nxcbc","updated":"20230906171301"},"Children":[{"ID":"20230906171301-0q46sm3","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230906171301-0q46sm3","updated":"20230906171301"},"Children":[{"ID":"20230906171301-7sugj3b","Type":"NodeParagraph","Properties":{"id":"20230906171301-7sugj3b","updated":"20230906171301"},"Children":[{"Type":"NodeText","Data":"优点：配置简单，单个Master宕机或重启维护对应用无影响，在磁盘配置为RAID10时，即使机器宕机不可恢复情况下，由于RAID10磁盘非常可靠，消息也不会丢（异步刷盘丢失少量消息，同步刷盘一条不丢），性能最高；"}]}]},{"ID":"20230906171301-6p8diq0","Type":"NodeListItem","ListData":{"BulletChar":42,"Marker":"Kg=="},"Properties":{"id":"20230906171301-6p8diq0","updated":"20230906171301"},"Children":[{"ID":"20230906171301-t8d4605","Type":"NodeParagraph","Properties":{"id":"20230906171301-t8d4605","updated":"20230906171301"},"Children":[{"Type":"NodeText","Data":"缺点：单台机器宕机期间，这台机器上未被消费的消息在机器恢复之前不可订阅，消息实时性会受到影响。"}]}]}]},{"ID":"20230906171301-kqttuu6","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230906171301-kqttuu6","updated":"20230906171301"},"Children":[{"Type":"NodeText","Data":"启动NameServer"}]},{"ID":"20230906171301-bb10fuu","Type":"NodeParagraph","Properties":{"id":"20230906171301-bb10fuu","updated":"20230906171301"},"Children":[{"Type":"NodeText","Data":"NameServer需要先于Broker启动，且如果在生产环境使用，为了保证高可用，建议一般规模的集群启动3个NameServer，各节点的启动命令相同，如下："}]},{"ID":"20230906171301-blxzbnc","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230906171301-blxzbnc","updated":"20230906171555"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"# 首先启动Name Server\n nohup sh bin/mqnamesrv \u003e log/namesrc.log 2\u003e\u00261 \u0026\n \n### 验证Name Server 是否启动成功\n$ tail -f ~/logs/rocketmqlogs/namesrv.log\nThe Name Server boot success...\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230906171301-wr78yfu","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230906171301-wr78yfu","updated":"20230906171301"},"Children":[{"Type":"NodeText","Data":"启动Broker+Proxy集群"}]},{"ID":"20230906171301-wxcot2f","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"Properties":{"id":"20230906171301-wxcot2f","updated":"20230906171817"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```"},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"YmFzaA=="},{"Type":"NodeCodeBlockCode","Data":"### 在机器192.168.93.102，103 上分别启动broker\nnohup sh bin/mqbroker -n 192.168.93.100:9876 192.168.93.101:9876 192.168.93.102:9876 -c /root/rocketmq/conf/2m-noslave/broker-a.properties \u003e ./log/broker.out 2\u003e\u00261 \u0026\nnohup sh bin/mqbroker -n 192.168.93.100:9876 192.168.93.101:9876 192.168.93.102:9876 -c /root/rocketmq/conf/2m-noslave/broker-b.properties \u003e ./log/broker.out 2\u003e\u00261 \u0026\n"},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```"}]},{"ID":"20230905163813-ogkzeld","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230905163813-ogkzeld","updated":"20230906171827"},"Children":[{"Type":"NodeText","Data":"验证"}]},{"ID":"20230906171839-b0nupcu","Type":"NodeParagraph","Properties":{"id":"20230906171839-b0nupcu","updated":"20230906171839"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"assets/image-20230906171839-ez2m0gd.png"},{"Type":"NodeCloseParen"}]}]},{"ID":"20230907173012-xv7xcgf","Type":"NodeParagraph","Properties":{"id":"20230907173012-xv7xcgf","updated":"20230907173040"},"Children":[{"Type":"NodeText","Data":"参考"},{"Type":"NodeTextMark","TextMarkType":"a","TextMarkAHref":"https://rocketmq.apache.org/zh/docs/deploymentOperations/01deploy","TextMarkTextContent":"rocketmq.apache.org/zh/d..."}]},{"ID":"20230905163802-db805bf","Type":"NodeParagraph","Properties":{"id":"20230905163802-db805bf","updated":"20230905163802"}}]}