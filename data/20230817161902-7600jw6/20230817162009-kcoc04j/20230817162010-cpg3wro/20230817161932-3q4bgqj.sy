{"ID":"20230817161932-3q4bgqj","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161932-3q4bgqj","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230817161932-3q4bgqj\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230817161933-8qxnif9\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230817161969-p1vsq4k\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20230817161950-56auecs\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"mysql数据库索引是如何实现的","updated":"20230817161932"},"Children":[{"ID":"20230817161933-8qxnif9","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161933-8qxnif9","updated":"20230817161933"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"mysql数据库索引是如何实现的"}]},{"ID":"20230817161934-dx5kq3b","Type":"NodeParagraph","Properties":{"id":"20230817161934-dx5kq3b","updated":"20230817161934"},"Children":[{"Type":"NodeText","Data":"问题引出：我们需要按照值来查找 和按照区间中查找 同时饿哦们还希望通过索引使查找速度变得更快"}]},{"ID":"20230817161935-ypaym0m","Type":"NodeParagraph","Properties":{"id":"20230817161935-ypaym0m","updated":"20230817161935"},"Children":[{"Type":"NodeText","Data":"也同时希望索引不能占过多的内存"}]},{"ID":"20230817161936-wsz5hbo","Type":"NodeParagraph","Properties":{"id":"20230817161936-wsz5hbo","updated":"20230817161936"},"Children":[{"Type":"NodeText","Data":"已经学过的o(1)时间复杂度查询的有哈希表、红黑树"}]},{"ID":"20230817161937-iwaxlsk","Type":"NodeParagraph","Properties":{"id":"20230817161937-iwaxlsk","updated":"20230817161937"},"Children":[{"Type":"NodeText","Data":"但是哈希表和红黑树都不能满足按照区间进行查找"}]},{"ID":"20230817161938-3yeme6j","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161938-3yeme6j","updated":"20230817161938"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"基于b+树的解决方案"}]},{"ID":"20230817161939-te6100i","Type":"NodeParagraph","Properties":{"id":"20230817161939-te6100i","updated":"20230817161939"},"Children":[{"Type":"NodeText","Data":"1、基于二叉树加有序链表来解决值以及区间的快速查找"}]},{"ID":"20230817161940-e06q35h","Type":"NodeParagraph","Properties":{"id":"20230817161940-e06q35h","updated":"20230817161940"},"Children":[{"Type":"NodeText","Data":"不足：假设给1亿条数据构造索引 那么就需要用到2亿个节点 每个节点若占用16B的大小的话 就需要2G内存 那么10个表就需要20G内存 于是乎内存就会溢出"}]},{"ID":"20230817161941-bw7mmtv","Type":"NodeParagraph","Properties":{"id":"20230817161941-bw7mmtv","updated":"20230817161941"},"Children":[{"Type":"NodeText","Data":"怎么解决索引占用内存过多的问题呢？"}]},{"ID":"20230817161942-r9ir0aw","Type":"NodeParagraph","Properties":{"id":"20230817161942-r9ir0aw","updated":"20230817161942"},"Children":[{"Type":"NodeText","Data":"思路是时间换空间 将索引存储在磁盘中 但是每读取一个节点就会进行一次磁盘io 磁盘io消耗的时间很长 效率会降低"}]},{"ID":"20230817161943-em1yemq","Type":"NodeParagraph","Properties":{"id":"20230817161943-em1yemq","updated":"20230817161943"},"Children":[{"Type":"NodeText","Data":"那又是如何改善的呢？"}]},{"ID":"20230817161944-i29ijma","Type":"NodeParagraph","Properties":{"id":"20230817161944-i29ijma","updated":"20230817161944"},"Children":[{"Type":"NodeText","Data":"2、m叉树加有序链表实现b+树"}]},{"ID":"20230817161945-ehuvmgs","Type":"NodeParagraph","Properties":{"id":"20230817161945-ehuvmgs","updated":"20230817161945"},"Children":[{"Type":"NodeText","Data":"假设我们有1亿个数据 我们建立100级索引 即100的四次方就可以达到1亿 于是乎树的高度仅仅为4 我们只需要经历4次的磁盘io的读写 就可以查询到数据"}]},{"ID":"20230817161946-0tjpwmk","Type":"NodeParagraph","Properties":{"id":"20230817161946-0tjpwmk","updated":"20230817161946"},"Children":[{"Type":"NodeText","Data":"这个m是不是越大越好呢？"}]},{"ID":"20230817161947-wld5wfk","Type":"NodeParagraph","Properties":{"id":"20230817161947-wld5wfk","updated":"20230817161947"},"Children":[{"Type":"NodeText","Data":"因为操作系统读取磁盘或者是内存的数据都是按页读取的 所以尽量让m等于页的大小"}]},{"ID":"20230817161948-motybtq","Type":"NodeParagraph","Properties":{"id":"20230817161948-motybtq","updated":"20230817161948"},"Children":[{"Type":"NodeText","Data":"3、b+树又有什么不足呢"}]},{"ID":"20230817161949-m6ti9ch","Type":"NodeParagraph","Properties":{"id":"20230817161949-m6ti9ch","updated":"20230817161949"},"Children":[{"Type":"NodeText","Data":"它会让数据的写入和删除过程变得更加慢 因为写入和删除都会伴随索引的更新"}]},{"ID":"20230817161950-56auecs","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161950-56auecs","updated":"20230817161950"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"b+树的自身性质"}]},{"ID":"20230817161951-4b11smf","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161951-4b11smf","updated":"20230817161951"},"Children":[{"ID":"20230817161952-h2m6qwz","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161952-h2m6qwz","updated":"20230817161952"},"Children":[{"ID":"20230817161953-t0kufpz","Type":"NodeParagraph","Properties":{"id":"20230817161953-t0kufpz","updated":"20230817161953"},"Children":[{"Type":"NodeText","Data":"b+树有m叉查找树加有序链表构成"}]}]},{"ID":"20230817161954-45scren","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161954-45scren","updated":"20230817161954"},"Children":[{"ID":"20230817161955-wrlt5h0","Type":"NodeParagraph","Properties":{"id":"20230817161955-wrlt5h0","updated":"20230817161955"},"Children":[{"Type":"NodeText","Data":"每个节点的个数不得多于m个 也不得少于m/2个"}]}]},{"ID":"20230817161956-ylcr00e","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161956-ylcr00e","updated":"20230817161956"},"Children":[{"ID":"20230817161957-f0jy7y3","Type":"NodeParagraph","Properties":{"id":"20230817161957-f0jy7y3","updated":"20230817161957"},"Children":[{"Type":"NodeText","Data":"根节点的子节点个数可以不超过m/2 属于特殊"}]}]},{"ID":"20230817161958-aipsr6m","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161958-aipsr6m","updated":"20230817161958"},"Children":[{"ID":"20230817161959-e13bd3o","Type":"NodeParagraph","Properties":{"id":"20230817161959-e13bd3o","updated":"20230817161959"},"Children":[{"Type":"NodeText","Data":"一般情况下 根节点存储在内存中 其他节点存储在磁盘中"}]}]}]},{"ID":"20230817161960-fo9qwjx","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161960-fo9qwjx","updated":"20230817161960"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"b+树相比于b树有哪些优点呢"}]},{"ID":"20230817161961-mht16b1","Type":"NodeParagraph","Properties":{"id":"20230817161961-mht16b1","updated":"20230817161961"},"Children":[{"Type":"NodeText","Data":"其实b+树就是b树的改进版  主要有两个地方不同"}]},{"ID":"20230817161962-uddzj9s","Type":"NodeList","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161962-uddzj9s","updated":"20230817161962"},"Children":[{"ID":"20230817161963-a9f4vaq","Type":"NodeListItem","Data":"-","ListData":{"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161963-a9f4vaq","updated":"20230817161963"},"Children":[{"ID":"20230817161964-6k1n52g","Type":"NodeParagraph","Properties":{"id":"20230817161964-6k1n52g","updated":"20230817161964"},"Children":[{"Type":"NodeText","Data":"b+树的节点不存储数据 只是索引 b树的节点它会存储数据"}]}]},{"ID":"20230817161965-x6i3ffz","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161965-x6i3ffz","updated":"20230817161965"},"Children":[{"ID":"20230817161966-3nvvpdv","Type":"NodeParagraph","Properties":{"id":"20230817161966-3nvvpdv","updated":"20230817161966"},"Children":[{"Type":"NodeText","Data":"b树的叶子节点并不需要链表来串联"}]},{"ID":"20230817161967-hpqm6cf","Type":"NodeParagraph","Properties":{"id":"20230817161967-hpqm6cf","updated":"20230817161967"},"Children":[{"Type":"NodeText","Data":"也就是说 b树只是一个每个节点的子节点个数不能小于m/2的m叉查找树"}]}]}]},{"ID":"20230817161968-wrx6ptj","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161968-wrx6ptj","updated":"20230817161968"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"b+树中将叶子节点串起来的是单链表还是双链表"}]},{"ID":"20230817161969-p1vsq4k","Type":"NodeParagraph","Properties":{"id":"20230817161969-p1vsq4k","updated":"20230817161969"},"Children":[{"Type":"NodeText","Data":"双链表 因为双链表更有利于节点的加入与删除 同时在倒叙遍历时也会更加方便"}]}]}