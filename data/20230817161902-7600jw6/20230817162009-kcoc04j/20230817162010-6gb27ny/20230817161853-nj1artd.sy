{"ID":"20230817161853-nj1artd","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161853-nj1artd","title":"日期函数","updated":"20230817161853"},"Children":[{"ID":"20230817161854-m22dr9e","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230817161854-m22dr9e","updated":"20230817161854"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"日期函数"}]},{"ID":"20230817161855-gnvygsb","Type":"NodeParagraph","Properties":{"id":"20230817161855-gnvygsb","updated":"20230817161855"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"日期函数"}]},{"ID":"20230817161856-81sj1ow","Type":"NodeParagraph","Properties":{"id":"20230817161856-81sj1ow","updated":"20230817161856"},"Children":[{"Type":"NodeText","Data":"在DBMS中日期和时间值以特殊的格式存储，以便能快速和有效地排序或过滤。常见的日期数据格式有两种：'yyyy-MM-dd' 和 'yyyyMMdd'。"}]},{"ID":"20230817161857-b9lodsf","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161857-b9lodsf","updated":"20230817161857"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"时间戳-日期格式转化"}]},{"ID":"20230817161858-1c798yb","Type":"NodeParagraph","Properties":{"id":"20230817161858-1c798yb","updated":"20230817161858"},"Children":[{"Type":"NodeText","Data":"时间戳是数据库中自动生成的唯一二进制数字，表明数据库中数据修改发生的相对顺序，其记录形式类似：1627963699 ，在实际工作环境中，对于用户行为发生的时间通常都是用时间戳进行记录，"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"时间戳和日期格式之间可以利用from_unixtime和 unix_timestamp进行转换。"}]},{"ID":"20230817161859-ckm4my9","Type":"NodeParagraph","Properties":{"id":"20230817161859-ckm4my9","updated":"20230817161859"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://uploadfiles.nowcoder.com/files/20210822/588579017_1629625828999/.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161860-a5se22f","Type":"NodeParagraph","Properties":{"id":"20230817161860-a5se22f","updated":"20230817161860"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"from_unixtime可以将时间戳转换成日期，其使用语法和输出如下所示："}]},{"ID":"20230817161861-do6c22i","Type":"NodeBlockquote","Properties":{"id":"20230817161861-do6c22i","updated":"20230817161861"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161862-3inq34f","Type":"NodeParagraph","Properties":{"id":"20230817161862-3inq34f","updated":"20230817161862"},"Children":[{"Type":"NodeText","Data":"select"}]}]},{"ID":"20230817161863-l2l2fq1","Type":"NodeBlockquote","Properties":{"id":"20230817161863-l2l2fq1","updated":"20230817161863"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161864-k7bjw35","Type":"NodeParagraph","Properties":{"id":"20230817161864-k7bjw35","updated":"20230817161864"},"Children":[{"Type":"NodeText","Data":"from_unixtime(time,'yyyy-MM-dd') as time"}]}]},{"ID":"20230817161865-8jf88hb","Type":"NodeBlockquote","Properties":{"id":"20230817161865-8jf88hb","updated":"20230817161865"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161866-3wgchu7","Type":"NodeParagraph","Properties":{"id":"20230817161866-3wgchu7","updated":"20230817161866"},"Children":[{"Type":"NodeText","Data":"From question_practice_detail"}]}]},{"ID":"20230817161867-kdeqh8y","Type":"NodeParagraph","Properties":{"id":"20230817161867-kdeqh8y","updated":"20230817161867"},"Children":[{"Type":"NodeText","Data":"得出"}]},{"ID":"20230817161868-3r79pg8","Type":"NodeParagraph","Properties":{"id":"20230817161868-3r79pg8","updated":"20230817161868"},"Children":[{"Type":"NodeText","Data":"Time"}]},{"ID":"20230817161869-adbn6bh","Type":"NodeParagraph","Properties":{"id":"20230817161869-adbn6bh","updated":"20230817161869"},"Children":[{"Type":"NodeText","Data":"2021-08-03"}]},{"ID":"20230817161870-0j6izge","Type":"NodeParagraph","Properties":{"id":"20230817161870-0j6izge","updated":"20230817161870"},"Children":[{"Type":"NodeText","Data":"2021-08-03"}]},{"ID":"20230817161871-csbbwar","Type":"NodeParagraph","Properties":{"id":"20230817161871-csbbwar","updated":"20230817161871"},"Children":[{"Type":"NodeText","Data":"2021-08-03"}]},{"ID":"20230817161872-sujq1w4","Type":"NodeParagraph","Properties":{"id":"20230817161872-sujq1w4","updated":"20230817161872"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"unix_timestamp可以将日期转换回时间戳，其使用语法和输出如下所示："}]},{"ID":"20230817161873-k4e0tkz","Type":"NodeBlockquote","Properties":{"id":"20230817161873-k4e0tkz","updated":"20230817161873"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161874-q49exxu","Type":"NodeParagraph","Properties":{"id":"20230817161874-q49exxu","updated":"20230817161874"},"Children":[{"Type":"NodeText","Data":"select"}]}]},{"ID":"20230817161875-x5h8jo8","Type":"NodeBlockquote","Properties":{"id":"20230817161875-x5h8jo8","updated":"20230817161875"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161876-z3toz7v","Type":"NodeParagraph","Properties":{"id":"20230817161876-z3toz7v","updated":"20230817161876"},"Children":[{"Type":"NodeText","Data":"from_unixtime('2021-08-01','yyyy-MM-dd') as time"}]}]},{"ID":"20230817161877-cwlg30i","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161877-cwlg30i","updated":"20230817161877"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"年月日截取"}]},{"ID":"20230817161878-h1cj3qz","Type":"NodeParagraph","Properties":{"id":"20230817161878-h1cj3qz","updated":"20230817161878"},"Children":[{"Type":"NodeText","Data":"对于常见的日期格式，类似’2021-08-01’，有时候在聚合计算时我们会想将日期中的"}]},{"ID":"20230817161879-w28zxig","Type":"NodeParagraph","Properties":{"id":"20230817161879-w28zxig","updated":"20230817161879"},"Children":[{"Type":"NodeText","Data":"年、月、日分别提取出来，这时应该怎么做呢？SQL为此提供了对应的年、月、日提取"}]},{"ID":"20230817161880-gdj53kd","Type":"NodeParagraph","Properties":{"id":"20230817161880-gdj53kd","updated":"20230817161880"},"Children":[{"Type":"NodeText","Data":"函数，分别为year(),month(),day()。"}]},{"ID":"20230817161881-1ijkeyt","Type":"NodeParagraph","Properties":{"id":"20230817161881-1ijkeyt","updated":"20230817161881"},"Children":[{"Type":"NodeText","Data":"select"}]},{"ID":"20230817161882-vjkat6m","Type":"NodeParagraph","Properties":{"id":"20230817161882-vjkat6m","updated":"20230817161882"},"Children":[{"Type":"NodeText","Data":"year('2021-08-01'),month('2021-08-01'),day('2021-08-01')"}]},{"ID":"20230817161883-z3nxt7u","Type":"NodeParagraph","Properties":{"id":"20230817161883-z3nxt7u","updated":"20230817161883"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://uploadfiles.nowcoder.com/files/20210822/588579017_1629625829031/.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161884-mjx5uvz","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161884-mjx5uvz","updated":"20230817161884"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"日期差计算"}]},{"ID":"20230817161885-ddnmhs6","Type":"NodeParagraph","Properties":{"id":"20230817161885-ddnmhs6","updated":"20230817161885"},"Children":[{"Type":"NodeText","Data":"这一节我们再来介绍几个常用的日期间隔计算函数"}]},{"ID":"20230817161886-pm3ep7h","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161886-pm3ep7h","updated":"20230817161886"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"-datedff"}]},{"ID":"20230817161887-g0so76y","Type":"NodeParagraph","Properties":{"id":"20230817161887-g0so76y","updated":"20230817161887"},"Children":[{"Type":"NodeText","Data":"datediff的作用为计算两个日期之间的天数间隔，语法为datediff(date1,date2)，返回"}]},{"ID":"20230817161888-r1adkjt","Type":"NodeParagraph","Properties":{"id":"20230817161888-r1adkjt","updated":"20230817161888"},"Children":[{"Type":"NodeText","Data":"起始时间 date1 和结束时间 date2 之间的天数，date1大于date2的情况下，返回的天"}]},{"ID":"20230817161889-91y8rnf","Type":"NodeParagraph","Properties":{"id":"20230817161889-91y8rnf","updated":"20230817161889"},"Children":[{"Type":"NodeText","Data":"数为正数，date1小于date2的情况下，返回的天数为负数。"}]},{"ID":"20230817161890-cc5e8z6","Type":"NodeBlockquote","Properties":{"id":"20230817161890-cc5e8z6","updated":"20230817161890"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161891-107q6bd","Type":"NodeParagraph","Properties":{"id":"20230817161891-107q6bd","updated":"20230817161891"},"Children":[{"Type":"NodeText","Data":"select"}]}]},{"ID":"20230817161892-dvwqflf","Type":"NodeBlockquote","Properties":{"id":"20230817161892-dvwqflf","updated":"20230817161892"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161893-a57jyw5","Type":"NodeParagraph","Properties":{"id":"20230817161893-a57jyw5","updated":"20230817161893"},"Children":[{"Type":"NodeText","Data":"datediff('2021-08–09','2021-08-01')"}]}]},{"ID":"20230817161894-698t77x","Type":"NodeParagraph","Properties":{"id":"20230817161894-698t77x","updated":"20230817161894"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"输出"}]},{"ID":"20230817161895-7kedw2l","Type":"NodeParagraph","Properties":{"id":"20230817161895-7kedw2l","updated":"20230817161895"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"8"}]},{"ID":"20230817161896-r5h342l","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161896-r5h342l","updated":"20230817161896"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"-date_sub"}]},{"ID":"20230817161897-pd7da8h","Type":"NodeParagraph","Properties":{"id":"20230817161897-pd7da8h","updated":"20230817161897"},"Children":[{"Type":"NodeText","Data":"语法为date_sub (string startdate, interval int day) ，返回开始日期startdate减少"}]},{"ID":"20230817161898-346rjop","Type":"NodeParagraph","Properties":{"id":"20230817161898-346rjop","updated":"20230817161898"},"Children":[{"Type":"NodeText","Data":"days天后的日期。"}]},{"ID":"20230817161899-j647wxn","Type":"NodeBlockquote","Properties":{"id":"20230817161899-j647wxn","updated":"20230817161899"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161900-p2yebce","Type":"NodeParagraph","Properties":{"id":"20230817161900-p2yebce","updated":"20230817161900"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"select"}]}]},{"ID":"20230817161901-oduyh8k","Type":"NodeBlockquote","Properties":{"id":"20230817161901-oduyh8k","updated":"20230817161901"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161902-xutj1lx","Type":"NodeParagraph","Properties":{"id":"20230817161902-xutj1lx","updated":"20230817161902"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"date_sub('2021-08–09',interval 8 day)"}]}]},{"ID":"20230817161903-j14n8py","Type":"NodeParagraph","Properties":{"id":"20230817161903-j14n8py","updated":"20230817161903"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"输出"}]},{"ID":"20230817161904-2z1g48g","Type":"NodeParagraph","Properties":{"id":"20230817161904-2z1g48g","updated":"20230817161904"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"‘2021-08-01'"}]},{"ID":"20230817161905-05msiqu","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161905-05msiqu","updated":"20230817161905"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"-"},{"Type":"NodeText","Data":"date_add"}]},{"ID":"20230817161906-9uhj4gu","Type":"NodeParagraph","Properties":{"id":"20230817161906-9uhj4gu","updated":"20230817161906"},"Children":[{"Type":"NodeText","Data":"语法为date_add(string startdate, interval int day) ，返回开始日期startdate增加days天后的日期"}]},{"ID":"20230817161907-fjtdd3r","Type":"NodeBlockquote","Properties":{"id":"20230817161907-fjtdd3r","updated":"20230817161907"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161908-gx35vmj","Type":"NodeParagraph","Properties":{"id":"20230817161908-gx35vmj","updated":"20230817161908"},"Children":[{"Type":"NodeText","Data":"select"}]}]},{"ID":"20230817161909-q3waohx","Type":"NodeBlockquote","Properties":{"id":"20230817161909-q3waohx","updated":"20230817161909"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161910-unzbmeo","Type":"NodeParagraph","Properties":{"id":"20230817161910-unzbmeo","updated":"20230817161910"},"Children":[{"Type":"NodeText","Data":"date_add('2021-08–01',interval 8 day)"}]}]},{"ID":"20230817161911-egbp0ka","Type":"NodeParagraph","Properties":{"id":"20230817161911-egbp0ka","updated":"20230817161911"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"输出"}]},{"ID":"20230817161912-wwkh54b","Type":"NodeParagraph","Properties":{"id":"20230817161912-wwkh54b","updated":"20230817161912"},"Children":[{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"‘2021-08-09'"}]},{"ID":"20230817161913-9ynopa9","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161913-9ynopa9","updated":"20230817161913"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"sql29:"}]},{"ID":"20230817161914-eca7gpi","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161914-eca7gpi","updated":"20230817161914"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"描述"}]},{"ID":"20230817161915-xpv82e9","Type":"NodeParagraph","Properties":{"id":"20230817161915-xpv82e9","updated":"20230817161915"},"Children":[{"Type":"NodeText","Data":"题目：现在运营想要查看用户在某天刷题后第二天还会再来刷题的平均概率。请你取出相应数据。"}]},{"ID":"20230817161916-7izu0h6","Type":"NodeParagraph","Properties":{"id":"20230817161916-7izu0h6","updated":"20230817161916"},"Children":[{"Type":"NodeText","Data":"示例：question_practice_detail"}]},{"ID":"20230817161917-91ptznq","Type":"NodeTable","Data":"| id   | device_id | quest_id | result | date       |\n| ---- | --------- | -------- | ------ | ---------- |\n| 1    | 2138      | 111      | wrong  | 2021-05-03 |\n| 2    | 3214      | 112      | wrong  | 2021-05-09 |\n| 3    | 3214      | 113      | wrong  | 2021-06-15 |\n| 4    | 6543      | 111      | right  | 2021-08-13 |\n| 5    | 2315      | 115      | right  | 2021-08-13 |\n| 6    | 2315      | 116      | right  | 2021-08-14 |\n| 7    | 2315      | 117      | wrong  | 2021-08-15 |\n| ……   |           |          |        |            |","TableAligns":[0,0,0,0,0],"Properties":{"id":"20230817161917-91ptznq","updated":"20230817161917"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"id"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"device_id"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"quest_id"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"result"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"date"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"1"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2138"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"111"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"wrong"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2021-05-03"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"3214"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"112"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"wrong"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2021-05-09"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"3"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"3214"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"113"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"wrong"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2021-06-15"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"4"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"6543"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"111"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"right"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2021-08-13"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"5"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2315"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"115"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"right"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2021-08-13"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"6"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2315"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"116"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"right"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2021-08-14"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"7"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2315"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"117"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"wrong"}]},{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"2021-08-15"}]}]},{"Type":"NodeTableRow","TableAligns":[0,0,0,0,0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"……"}]},{"Type":"NodeTableCell","Properties":{"id":""}},{"Type":"NodeTableCell","Properties":{"id":""}},{"Type":"NodeTableCell","Properties":{"id":""}},{"Type":"NodeTableCell","Properties":{"id":""}}]}]},{"ID":"20230817161918-dfaqfey","Type":"NodeParagraph","Properties":{"id":"20230817161918-dfaqfey","updated":"20230817161918"},"Children":[{"Type":"NodeText","Data":"根据示例，你的查询应返回以下结果："}]},{"ID":"20230817161919-ccn8sd3","Type":"NodeTable","Data":"| avg_ret |\n| ------- |\n| 0.3000  |","TableAligns":[0],"Properties":{"id":"20230817161919-ccn8sd3","updated":"20230817161919"},"Children":[{"Type":"NodeTableHead","Properties":{"id":""},"Children":[{"Type":"NodeTableRow","Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"avg_ret"}]}]}]},{"Type":"NodeTableRow","TableAligns":[0],"Properties":{"id":""},"Children":[{"Type":"NodeTableCell","Properties":{"id":""},"Children":[{"Type":"NodeText","Data":"0.3000"}]}]}]},{"ID":"20230817161920-kf8vpvo","Type":"NodeParagraph","Properties":{"id":"20230817161920-kf8vpvo","updated":"20230817161920"},"Children":[{"Type":"NodeText","Data":"解题："}]},{"ID":"20230817161921-o1o5yjf","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c3Fs","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230817161921-o1o5yjf","updated":"20230817161921"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c3Fs","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"select avg(if(b.device_id is not null,1,0)) \nfrom  (select DISTINCT device_id ,date from  question_practice_detail)a \nleft join \n(SELECT DISTINCT device_id,date_sub(date,interval 1 day)as date from question_practice_detail)b\non a.date=b.date and a.device_id=b.device_id\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230817161922-jknoj77","Type":"NodeParagraph","Properties":{"id":"20230817161922-jknoj77","updated":"20230817161922"},"Children":[{"Type":"NodeText","Data":"DATE_SUB() 函数从日期减去指定的时间间隔。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"代码中就是减去一天"}]},{"ID":"20230817161923-j4h2dfs","Type":"NodeParagraph","Properties":{"id":"20230817161923-j4h2dfs","updated":"20230817161923"},"Children":[{"Type":"NodeText","Data":"原本日期"}]},{"ID":"20230817161924-ly7ob8k","Type":"NodeParagraph","Properties":{"id":"20230817161924-ly7ob8k","updated":"20230817161924"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://uploadfiles.nowcoder.com/images/20210825/525480663_1629862515086/0349227935BF22E502425CAB7183820B","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161925-03g9cqh","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230817161925-03g9cqh","updated":"20230817161925"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"date_sub(``date``,interval 1 ``day``)\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230817161926-l1kekhf","Type":"NodeParagraph","Properties":{"id":"20230817161926-l1kekhf","updated":"20230817161926"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://uploadfiles.nowcoder.com/images/20210825/525480663_1629862547029/955E75DBF8BE8DC094CC982E04444AAB","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161927-zxce0c6","Type":"NodeParagraph","Properties":{"id":"20230817161927-zxce0c6","updated":"20230817161927"},"Children":[{"Type":"NodeText","Data":"left join 后"}]},{"ID":"20230817161928-qhprsna","Type":"NodeParagraph","Properties":{"id":"20230817161928-qhprsna","updated":"20230817161928"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://uploadfiles.nowcoder.com/images/20210825/525480663_1629862560965/C01D7C9D97EFA967357EE9504691BB11","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161929-bcftn6z","Type":"NodeParagraph","Properties":{"id":"20230817161929-bcftn6z","updated":"20230817161929"},"Children":[{"Type":"NodeText","Data":"思路就是找到隔天日期后还会来的同一个人，取平均值3/10"}]}]}