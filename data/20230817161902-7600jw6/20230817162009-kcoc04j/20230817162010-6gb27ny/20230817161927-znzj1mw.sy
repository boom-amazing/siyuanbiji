{"ID":"20230817161927-znzj1mw","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161927-znzj1mw","title":"计算函数","updated":"20230817161927"},"Children":[{"ID":"20230817161928-mb90psn","Type":"NodeHeading","HeadingLevel":1,"Properties":{"id":"20230817161928-mb90psn","updated":"20230817161928"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"# ","Properties":{"id":""}},{"Type":"NodeText","Data":"计算函数"}]},{"ID":"20230817161929-gs8pz9l","Type":"NodeParagraph","Properties":{"id":"20230817161929-gs8pz9l","updated":"20230817161929"},"Children":[{"Type":"NodeText","Data":"在工作场景中，我们经常需要对数据进行一些汇总计算而不是查询明细值，为此SQL提供了专门的函数，这节我们来介绍一下常见的计算函数。"}]},{"ID":"20230817161930-x708hbo","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161930-x708hbo","updated":"20230817161930"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"AVG"}]},{"ID":"20230817161931-l27ncry","Type":"NodeParagraph","Properties":{"id":"20230817161931-l27ncry","updated":"20230817161931"},"Children":[{"Type":"NodeText","Data":"AVG()为平均值函数，通过对表中行数计数并计算其列值之和，求得该列的平均值。 AVG() 可用来返回所有列的平均值，也可以用来返回特定列或行的平均值。下面的例子 返回的是user_active表中所有用户的平均gpa情况 。"}]},{"ID":"20230817161932-rkwkh9a","Type":"NodeBlockquote","Properties":{"id":"20230817161932-rkwkh9a","updated":"20230817161932"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161933-e56ifdy","Type":"NodeParagraph","Properties":{"id":"20230817161933-e56ifdy","updated":"20230817161933"},"Children":[{"Type":"NodeText","Data":"Select avg(gpa)"}]}]},{"ID":"20230817161934-e1x2r9m","Type":"NodeBlockquote","Properties":{"id":"20230817161934-e1x2r9m","updated":"20230817161934"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161935-9szbbnf","Type":"NodeParagraph","Properties":{"id":"20230817161935-9szbbnf","updated":"20230817161935"},"Children":[{"Type":"NodeText","Data":"From user_profile"}]}]},{"ID":"20230817161936-d9dpac7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161936-d9dpac7","updated":"20230817161936"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"COUNT"}]},{"ID":"20230817161937-embrl99","Type":"NodeParagraph","Properties":{"id":"20230817161937-embrl99","updated":"20230817161937"},"Children":[{"Type":"NodeText","Data":"COUNT()函数为计数函数，可利用 COUNT()确定表中行的数目或符合特定 条件的行的数目。"}]},{"ID":"20230817161938-8fomyth","Type":"NodeParagraph","Properties":{"id":"20230817161938-8fomyth","updated":"20230817161938"},"Children":[{"Type":"NodeText","Data":"COUNT()函数有两种使用方式："}]},{"ID":"20230817161939-qeir44s","Type":"NodeParagraph","Properties":{"id":"20230817161939-qeir44s","updated":"20230817161939"},"Children":[{"Type":"NodeText","Data":"使用 COUNT(*)对表中行的数目进行计数，不管表列中包含的是空值（NULL）还是非空值。 使用 COUNT(column)对特定列中具有值的行进行计数，忽略 NULL 值。"}]},{"ID":"20230817161940-sm5uwin","Type":"NodeParagraph","Properties":{"id":"20230817161940-sm5uwin","updated":"20230817161940"},"Children":[{"Type":"NodeText","Data":"这两点该怎么理解呢，比如对于下面的数据表，如果用语法1，那么得到的结果会是4，因为表中一共有4行数据"}]},{"ID":"20230817161941-vqnl0i1","Type":"NodeParagraph","Properties":{"id":"20230817161941-vqnl0i1","updated":"20230817161941"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://uploadfiles.nowcoder.com/files/20210822/588579017_1629625236592/.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161942-q1czp00","Type":"NodeParagraph","Properties":{"id":"20230817161942-q1czp00","updated":"20230817161942"},"Children":[{"Type":"NodeText","Data":"语法1:"}]},{"ID":"20230817161943-rti98o2","Type":"NodeBlockquote","Properties":{"id":"20230817161943-rti98o2","updated":"20230817161943"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161944-e5rooft","Type":"NodeParagraph","Properties":{"id":"20230817161944-e5rooft","updated":"20230817161944"},"Children":[{"Type":"NodeText","Data":"SELECT COUNT(*) AS num_cnt FROM user_profile;"}]}]},{"ID":"20230817161945-lsd3d1f","Type":"NodeParagraph","Properties":{"id":"20230817161945-lsd3d1f","updated":"20230817161945"},"Children":[{"Type":"NodeText","Data":"但如果我们对age列进行count，因为该列中存在一行为空值，在计数中不会被算入，语"}]},{"ID":"20230817161946-xmlh98a","Type":"NodeParagraph","Properties":{"id":"20230817161946-xmlh98a","updated":"20230817161946"},"Children":[{"Type":"NodeText","Data":"法2得到的结果会是3"}]},{"ID":"20230817161947-9x76h65","Type":"NodeParagraph","Properties":{"id":"20230817161947-9x76h65","updated":"20230817161947"},"Children":[{"Type":"NodeText","Data":"语法2:"}]},{"ID":"20230817161948-8n1acvc","Type":"NodeBlockquote","Properties":{"id":"20230817161948-8n1acvc","updated":"20230817161948"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161949-rb0km3l","Type":"NodeParagraph","Properties":{"id":"20230817161949-rb0km3l","updated":"20230817161949"},"Children":[{"Type":"NodeText","Data":"SELECT COUNT(age) AS num_cnt FROM user_profile;"}]}]},{"ID":"20230817161950-50d9xr0","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161950-50d9xr0","updated":"20230817161950"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"MAX"}]},{"ID":"20230817161951-pvlxhum","Type":"NodeParagraph","Properties":{"id":"20230817161951-pvlxhum","updated":"20230817161951"},"Children":[{"Type":"NodeText","Data":"MAX()返回指定列中的最大值。MAX在使用时，（）需指定要返回最大值的列名，语法"}]},{"ID":"20230817161952-bt633q0","Type":"NodeParagraph","Properties":{"id":"20230817161952-bt633q0","updated":"20230817161952"},"Children":[{"Type":"NodeText","Data":"如下所示："}]},{"ID":"20230817161953-f9x5p9l","Type":"NodeBlockquote","Properties":{"id":"20230817161953-f9x5p9l","updated":"20230817161953"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161954-7eujv22","Type":"NodeParagraph","Properties":{"id":"20230817161954-7eujv22","updated":"20230817161954"},"Children":[{"Type":"NodeText","Data":"SELECT MAX(age) AS max_age FROM user_profile;"}]}]},{"ID":"20230817161955-nrbhzgl","Type":"NodeParagraph","Properties":{"id":"20230817161955-nrbhzgl","updated":"20230817161955"},"Children":[{"Type":"NodeText","Data":"这里，MAX()返回 user_active表中最大的年龄取值"}]},{"ID":"20230817161956-2n1r8d5","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161956-2n1r8d5","updated":"20230817161956"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"MIN"}]},{"ID":"20230817161957-0j49d8i","Type":"NodeParagraph","Properties":{"id":"20230817161957-0j49d8i","updated":"20230817161957"},"Children":[{"Type":"NodeText","Data":"MIN()的功能正好与 MAX()功能相反，它返回指定列的最小值。与 MAX() 一样，MIN()"}]},{"ID":"20230817161958-bbpfclh","Type":"NodeParagraph","Properties":{"id":"20230817161958-bbpfclh","updated":"20230817161958"},"Children":[{"Type":"NodeText","Data":"要求指定列名，如下所示："}]},{"ID":"20230817161959-olnh565","Type":"NodeBlockquote","Properties":{"id":"20230817161959-olnh565","updated":"20230817161959"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161960-0y1z9kt","Type":"NodeParagraph","Properties":{"id":"20230817161960-0y1z9kt","updated":"20230817161960"},"Children":[{"Type":"NodeText","Data":"SELECT MIN(age) AS min_age FROM user_profile;"}]}]},{"ID":"20230817161961-go2j9ij","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161961-go2j9ij","updated":"20230817161961"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"SUM"}]},{"ID":"20230817161962-1y2byu5","Type":"NodeParagraph","Properties":{"id":"20230817161962-1y2byu5","updated":"20230817161962"},"Children":[{"Type":"NodeText","Data":"SUM()用来返回指定列值的和（总计）。如下所示函数返回了age列所有用户年纪的总和"}]},{"ID":"20230817161963-vwbss3m","Type":"NodeBlockquote","Properties":{"id":"20230817161963-vwbss3m","updated":"20230817161963"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161964-jludz5s","Type":"NodeParagraph","Properties":{"id":"20230817161964-jludz5s","updated":"20230817161964"},"Children":[{"Type":"NodeText","Data":"SELECT SUM(age) AS sum_age FROM user_profile;"}]}]},{"ID":"20230817161965-aqx6j6l","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161965-aqx6j6l","updated":"20230817161965"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"strong","TextMarkTextContent":"取整函数"}]},{"ID":"20230817161966-5bpbql9","Type":"NodeParagraph","Properties":{"id":"20230817161966-5bpbql9","updated":"20230817161966"},"Children":[{"Type":"NodeText","Data":"在一些聚集运算中，容易出现结果为非整数的情况，这时候如果想要限定结果返回的小数位数就可以使用SQL中内置的round函数，语法格式为round（value，n），其中 value代表想要限制小数位数的字段，n代表想要限制的小数位数。"}]},{"ID":"20230817161967-0d3n6hy","Type":"NodeParagraph","Properties":{"id":"20230817161967-0d3n6hy","updated":"20230817161967"},"Children":[{"Type":"NodeText","Data":"下列语句就代表求age列的均值，并保留一位小数。"}]},{"ID":"20230817161968-xaiq7qu","Type":"NodeBlockquote","Properties":{"id":"20230817161968-xaiq7qu","updated":"20230817161968"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161969-uuyjamr","Type":"NodeParagraph","Properties":{"id":"20230817161969-uuyjamr","updated":"20230817161969"},"Children":[{"Type":"NodeText","Data":"SELECT round(avg(age),1) AS avg_age FROM user_profile;"}]}]}]}