{"ID":"20230817161958-u0w39ar","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161958-u0w39ar","title":"spark任务提交的三种模式","updated":"20230817161958"},"Children":[{"ID":"20230817161959-3lmwuwj","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161959-3lmwuwj","updated":"20230817161959"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Spark Job的三种提交模式"}]},{"ID":"20230817161960-uirehln","Type":"NodeList","ListData":{"Typ":1,"Tight":true,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20230817161960-uirehln","updated":"20230817161960"},"Children":[{"ID":"20230817161961-tjutlho","Type":"NodeListItem","Data":"1","ListData":{"Typ":1,"Tight":true,"Start":1,"Delimiter":46,"Padding":3,"Marker":"MQ==","Num":1},"Properties":{"id":"20230817161961-tjutlho","updated":"20230817161961"},"Children":[{"ID":"20230817161962-8dlszzr","Type":"NodeParagraph","Properties":{"id":"20230817161962-8dlszzr","updated":"20230817161962"},"Children":[{"Type":"NodeText","Data":"第一种，standalone模式，基于Spark自己的standalone集群。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"指定–master spark://bigdata01:7077"}]}]},{"ID":"20230817161963-9exqohd","Type":"NodeListItem","Data":"2","ListData":{"Typ":1,"Tight":true,"Start":2,"Delimiter":46,"Padding":3,"Marker":"Mg==","Num":2},"Properties":{"id":"20230817161963-9exqohd","updated":"20230817161963"},"Children":[{"ID":"20230817161964-vvb6mia","Type":"NodeParagraph","Properties":{"id":"20230817161964-vvb6mia","updated":"20230817161964"},"Children":[{"Type":"NodeText","Data":"第二种，是基于YARN的client模式。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"指定–master yarn --deploy-mode client"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"这种方式主要用于测试，查看日志方便一些，部分日志会直接打印到控制台上面，因为driver进程运行在本地客户端，就是提交Spark任务的那个客户端机器，driver负责调度job，会与yarn集群产生大量的通信，一般情况下Spark客户端机器和Hadoop集群的机器是无法内网通信，只能通过外网，这样在大量通信的情况下会影响通信效率，并且当我们执行一些action操作的时候数据也会返回给driver端，driver端机器的配置一般都不高，可能会导致内存溢出等问题。"}]}]},{"ID":"20230817161965-aqtq8n7","Type":"NodeListItem","Data":"3","ListData":{"Typ":1,"Tight":true,"Start":3,"Delimiter":46,"Padding":3,"Marker":"Mw==","Num":3},"Properties":{"id":"20230817161965-aqtq8n7","updated":"20230817161965"},"Children":[{"ID":"20230817161966-79dpekx","Type":"NodeParagraph","Properties":{"id":"20230817161966-79dpekx","updated":"20230817161966"},"Children":[{"Type":"NodeText","Data":"第三种，是基于YARN的cluster模式。【推荐】"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"指定–master yarn --deploy-mode cluster"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"这种方式driver进程运行在集群中的某一台机器上，这样集群内部节点之间通信是可以通过内网通信的，并且集群内的机器的配置也会比普通的客户端机器配置高，所以就不存在yarn-client模式的一些问题了，只不过这个时候查看日志只能到集群上面看了，这倒没什么影响。"}]}]}]},{"ID":"20230817161967-ue8juvx","Type":"NodeParagraph","Properties":{"id":"20230817161967-ue8juvx","updated":"20230817161967"},"Children":[{"Type":"NodeText","Data":"接下来看一下这个图，加深一下理解"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f56449a099a9ee018700848.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"左边是standalone模式，现在我们使用的提交方式，driver进程是在客户端机器中的，其实针对standalone模式而言，这个Driver进程也是可以运行在集群中的"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"来看一下官网文档，standalone模式也是支持的，通过指定deploy-mode 为cluster即可"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f5644ab096c6f8212670602.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161968-nnd8ukg","Type":"NodeParagraph","Properties":{"id":"20230817161968-nnd8ukg","updated":"20230817161968"},"Children":[{"Type":"NodeText","Data":"中间的值yarn client模式，由于是on yarn模式，所以里面是yarn集群的进程，此时driver进程就在提交spark任务的客户端机器上了"}]},{"ID":"20230817161969-1p1cak9","Type":"NodeParagraph","Properties":{"id":"20230817161969-1p1cak9","updated":"20230817161969"},"Children":[{"Type":"NodeText","Data":"最右边这个是yarn cluster模式，driver进程就会在集群中的某一个节点上面。"}]}]}