{"ID":"20230817161947-ddcltmk","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161947-ddcltmk","title":"Region概念解释","updated":"20230817161947"},"Children":[{"ID":"20230817161948-rc6j4wg","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161948-rc6j4wg","updated":"20230817161948"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"Region概念解释"}]},{"ID":"20230817161949-cawbu3z","Type":"NodeParagraph","Properties":{"id":"20230817161949-cawbu3z","updated":"20230817161949"},"Children":[{"Type":"NodeText","Data":"Region可以翻译为区域，在HBase里面，一个表中的数据，会按照行被横向划分为多个Region。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"每个Region，按照存储的Rowkey的最小行键和最大行键指定的，使用区间"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"[start Rowkey,end Rowkey)"}]},{"ID":"20230817161950-etm8kt6","Type":"NodeParagraph","Properties":{"id":"20230817161950-etm8kt6","updated":"20230817161950"},"Children":[{"Type":"NodeText","Data":"解释："}]},{"ID":"20230817161951-rwy80ue","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161951-rwy80ue","updated":"20230817161951"},"Children":[{"ID":"20230817161952-a3jng95","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161952-a3jng95","updated":"20230817161952"},"Children":[{"ID":"20230817161953-54d88mg","Type":"NodeParagraph","Properties":{"id":"20230817161953-54d88mg","updated":"20230817161953"},"Children":[{"Type":"NodeText","Data":"如果一个文件中数据量很大的时候，从这个大文件中读取数据肯定会比较慢"}]}]},{"ID":"20230817161954-zkqh2s6","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161954-zkqh2s6","updated":"20230817161954"},"Children":[{"ID":"20230817161955-tosqr04","Type":"NodeParagraph","Properties":{"id":"20230817161955-tosqr04","updated":"20230817161955"},"Children":[{"Type":"NodeText","Data":"打开一个小文件查找数据和打开一个大文件查找数据的效率是不一样的"}]}]}]},{"ID":"20230817161956-poye9jd","Type":"NodeParagraph","Properties":{"id":"20230817161956-poye9jd","updated":"20230817161956"},"Children":[{"Type":"NodeText","Data":"看下面这个图："},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"region1","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"C:\\Users\\HHH\\Desktop\\region1.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"在这个图里面，表t1刚创建的时候默认只有1个Region，后来数据量多了以后，Region会自动分裂，这样就产生了多个Region。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"那么我们在查询数据的时候，首先要知道数据在哪个Region中，再从Region中读取数据。"}]},{"ID":"20230817161957-ml5rlf5","Type":"NodeParagraph","Properties":{"id":"20230817161957-ml5rlf5","updated":"20230817161957"},"Children":[{"Type":"NodeText","Data":"如何知道数据在哪个Region中呢？"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"我们在向表中插入数据的时候，Rowkey是必须指定，不能缺少的，并且Rowkey在存储的时候是有序存储的。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"那么我们在定位数据的时候，就可以拿Rowkey到对应的Region中进行对比，每个Region中都会有一个最小Rowkey和最大Rowkey，这样就能很快的判断出来我们要找的数据是不是在这个Region中了。"}]},{"ID":"20230817161958-plvl1c8","Type":"NodeParagraph","Properties":{"id":"20230817161958-plvl1c8","updated":"20230817161958"},"Children":[{"Type":"NodeText","Data":"其实每个Region中的最大Rowkey是有一个地方进行维护的，HBase内部默认提供了一个目录表来维护这个关系。"}]},{"ID":"20230817161959-du0kxja","Type":"NodeParagraph","Properties":{"id":"20230817161959-du0kxja","updated":"20230817161959"},"Children":[{"Type":"NodeText","Data":"如果表t1有两个列族c1和c2，那么在存储的时候，列族c1中的数据是一个独立的文件，列族c2中的数据也会是一个独立的文件，也就是说，每一个列族中的数据在底层存储的时候都是一个单独的文件。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"如下图所示，当表有多个Region的时候，每个Region内部的每个列族是一个单独的文件。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"region2","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"C:\\Users\\HHH\\Desktop\\region2.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"所以说我们在设计列族的时候，可以把经常读取的列存储到一个列族中，不经常读取的列放到另一个列族中。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"这样我们在读取部分列的数据的时候，就只需要读取对应列族文件中的数据，提高读取效率。"}]},{"ID":"20230817161960-gfhjmux","Type":"NodeParagraph","Properties":{"id":"20230817161960-gfhjmux","updated":"20230817161960"},"Children":[{"Type":"NodeText","Data":"在这里有几个问题："}]},{"ID":"20230817161961-yvyqr3d","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161961-yvyqr3d","updated":"20230817161961"},"Children":[{"ID":"20230817161962-rs57j0a","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161962-rs57j0a","updated":"20230817161962"},"Children":[{"ID":"20230817161963-nivk2oo","Type":"NodeParagraph","Properties":{"id":"20230817161963-nivk2oo","updated":"20230817161963"},"Children":[{"Type":"NodeText","Data":"如果一个列族中如果有2个列，那么这2个列会存储到2个列族文件中吗？不会的。"}]}]},{"ID":"20230817161964-idvl3y0","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161964-idvl3y0","updated":"20230817161964"},"Children":[{"ID":"20230817161965-hlod2vm","Type":"NodeParagraph","Properties":{"id":"20230817161965-hlod2vm","updated":"20230817161965"},"Children":[{"Type":"NodeText","Data":"一行记录，会不会分到多个文件中存储？ 会"}]}]},{"ID":"20230817161966-jghuiy7","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161966-jghuiy7","updated":"20230817161966"},"Children":[{"ID":"20230817161967-v0b4b5i","Type":"NodeParagraph","Properties":{"id":"20230817161967-v0b4b5i","updated":"20230817161967"},"Children":[{"Type":"NodeText","Data":"一个列族中的数据，会不会在多个Region中存储？会"}]}]},{"ID":"20230817161968-sx10963","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161968-sx10963","updated":"20230817161968"},"Children":[{"ID":"20230817161969-o8vt9dv","Type":"NodeParagraph","Properties":{"id":"20230817161969-o8vt9dv","updated":"20230817161969"},"Children":[{"Type":"NodeText","Data":"一个Region中，会不会存储多个列族文件？会"}]}]}]}]}