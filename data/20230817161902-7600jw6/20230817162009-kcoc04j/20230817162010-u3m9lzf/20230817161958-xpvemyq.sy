{"ID":"20230817161958-xpvemyq","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161958-xpvemyq","title":"HDFS写数据源码过程大致分析","updated":"20230817161958"},"Children":[{"ID":"20230817161959-yk2knat","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161959-yk2knat","updated":"20230817161959"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"HDFS写数据源码过程大致分析："}]},{"ID":"20230817161960-8w0pyhw","Type":"NodeParagraph","Properties":{"id":"20230817161960-8w0pyhw","updated":"20230817161960"},"Children":[{"Type":"NodeText","Data":"源码调用大致可以分为两块："}]},{"ID":"20230817161961-4x532hu","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161961-4x532hu","updated":"20230817161961"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"1、通过create创建文件的过程"}]},{"ID":"20230817161962-1uoo3hp","Type":"NodeParagraph","Properties":{"id":"20230817161962-1uoo3hp","updated":"20230817161962"},"Children":[{"Type":"NodeText","Data":"1.1、客户端向NameNode发起创建文件的请求"}]},{"ID":"20230817161963-tq8labk","Type":"NodeParagraph","Properties":{"id":"20230817161963-tq8labk","updated":"20230817161963"},"Children":[{"Type":"NodeText","Data":"1.2、启动DataStreamer线程，创建DataQueue数据队列，等待处理DataQueue数据队列中的信息"}]},{"ID":"20230817161964-vsu23sj","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161964-vsu23sj","updated":"20230817161964"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"2、通过wirte方法向文件中写入数据的过程"}]},{"ID":"20230817161965-9hmocsn","Type":"NodeParagraph","Properties":{"id":"20230817161965-9hmocsn","updated":"20230817161965"},"Children":[{"Type":"NodeText","Data":"2.1 向DataStreamer中的DataQueue队列中写入数据"}]},{"ID":"20230817161966-viaqan5","Type":"NodeParagraph","Properties":{"id":"20230817161966-viaqan5","updated":"20230817161966"},"Children":[{"Type":"NodeText","Data":"2.2、建立数据管道以及创建输出流"}]},{"ID":"20230817161967-xb76mfx","Type":"NodeParagraph","Properties":{"id":"20230817161967-xb76mfx","updated":"20230817161967"},"Children":[{"Type":"NodeText","Data":"2.2.1向NameNode获取Block需要存储的DataNode节点信息列表(通过机架感知策略)"}]},{"ID":"20230817161968-lwylhs2","Type":"NodeParagraph","Properties":{"id":"20230817161968-lwylhs2","updated":"20230817161968"},"Children":[{"Type":"NodeText","Data":"2.2.2创建输出流，通过socket发送数据，DataNode节点启动线程，接受socket数据，写入文件"}]},{"ID":"20230817161969-j2435pq","Type":"NodeParagraph","Properties":{"id":"20230817161969-j2435pq","updated":"20230817161969"},"Children":[{"Type":"NodeText","Data":"2.3在DataStreamer中也会创建一个处理反馈应答消息的线程ResponseProcessor线程 主要用于监听数据是否发送成功"}]}]}