{"ID":"20230817161956-x6ps6al","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161956-x6ps6al","title":"shuffle过程","updated":"20230817161956"},"Children":[{"ID":"20230817161957-0rm9mu2","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161957-0rm9mu2","updated":"20230817161957"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"shuffle过程(指从map端输出到reduce端接受的整个过程)"}]},{"ID":"20230817161958-qkinzr3","Type":"NodeParagraph","Properties":{"id":"20230817161958-qkinzr3","updated":"20230817161958"},"Children":[{"Type":"NodeText","Data":"1、当map任务产生输出后 每个map任务都有一个环形内存缓冲器用于存储任务的输出 缓冲区的大小默认是100M 一旦达到80%后 后台线程便会将溢出内容写到磁盘中"}]},{"ID":"20230817161959-1z9itj6","Type":"NodeParagraph","Properties":{"id":"20230817161959-1z9itj6","updated":"20230817161959"},"Children":[{"Type":"NodeText","Data":"2、在写之前线程会根据最终要传的reducer把数据划分成相应的分区 在每个分区中后台线程会按照键进行内存中排序 如果有combiner函数 还会在排序后输出上运行 运行combiner函数会让输出结果紧凑 减少写到磁盘的数据和传递给reducer的数据"}]},{"ID":"20230817161960-635ptgh","Type":"NodeParagraph","Properties":{"id":"20230817161960-635ptgh","updated":"20230817161960"},"Children":[{"Type":"NodeText","Data":"3、溢出文件会被合并到一个已分区且已排序的输出文件中"}]},{"ID":"20230817161961-jk5anib","Type":"NodeParagraph","Properties":{"id":"20230817161961-jk5anib","updated":"20230817161961"},"Children":[{"Type":"NodeText","Data":"4、reduce端通过http得到输出文件的分区 在每个map任务执行完reduce任务就开始复制其输出 复制完所有的输出后 reduce任务进行合并阶段 将合并任务最后交给reduce端进行执行"}]},{"ID":"20230817161962-7cjrlnc","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161962-7cjrlnc","updated":"20230817161962"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"如果map输出达不到缓冲区的80%呢？"}]},{"ID":"20230817161963-h6d90g4","Type":"NodeParagraph","Properties":{"id":"20230817161963-h6d90g4","updated":"20230817161963"},"Children":[{"Type":"NodeText","Data":"如果map输出非常小 会被复制到reduce任务的jvm的内存"}]},{"ID":"20230817161964-25b3a1g","Type":"NodeHeading","HeadingLevel":5,"Properties":{"id":"20230817161964-25b3a1g","updated":"20230817161964"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"##### ","Properties":{"id":""}},{"Type":"NodeText","Data":"优化mapreduce方法："}]},{"ID":"20230817161965-h9g10s0","Type":"NodeParagraph","Properties":{"id":"20230817161965-h9g10s0","updated":"20230817161965"},"Children":[{"Type":"NodeText","Data":"1、改变缓冲区大小 以及溢出的阈值"}]},{"ID":"20230817161966-bx32mt8","Type":"NodeParagraph","Properties":{"id":"20230817161966-bx32mt8","updated":"20230817161966"},"Children":[{"Type":"NodeText","Data":"2、排序文件时 一次最多合并的流数"}]},{"ID":"20230817161967-mo5x7kw","Type":"NodeParagraph","Properties":{"id":"20230817161967-mo5x7kw","updated":"20230817161967"},"Children":[{"Type":"NodeText","Data":"3、执行combinner所需最少的文件数"}]},{"ID":"20230817161968-iddp0ku","Type":"NodeParagraph","Properties":{"id":"20230817161968-iddp0ku","updated":"20230817161968"},"Children":[{"Type":"NodeText","Data":"4、是否压缩map输出"}]},{"ID":"20230817161969-zmh554g","Type":"NodeParagraph","Properties":{"id":"20230817161969-zmh554g","updated":"20230817161969"},"Children":[{"Type":"NodeText","Data":"5、每个节点管理器工作的线程数 用于将map输出到reducer"}]}]}