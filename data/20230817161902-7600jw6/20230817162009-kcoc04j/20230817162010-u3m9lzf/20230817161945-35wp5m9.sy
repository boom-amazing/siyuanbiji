{"ID":"20230817161945-35wp5m9","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161945-35wp5m9","title":"HDFS结构介绍","updated":"20230817161945"},"Children":[{"ID":"20230817161946-8zcusp4","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161946-8zcusp4","updated":"20230817161946"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"NameNode介绍"}]},{"ID":"20230817161947-myl64dv","Type":"NodeParagraph","Properties":{"id":"20230817161947-myl64dv","updated":"20230817161947"},"Children":[{"Type":"NodeText","Data":"作用："}]},{"ID":"20230817161948-lbzo7co","Type":"NodeParagraph","Properties":{"id":"20230817161948-lbzo7co","updated":"20230817161948"},"Children":[{"Type":"NodeText","Data":"1、维护整个文件目录树 表示目录层级之间的关系"}]},{"ID":"20230817161949-mmfw2v1","Type":"NodeParagraph","Properties":{"id":"20230817161949-mmfw2v1","updated":"20230817161949"},"Children":[{"Type":"NodeText","Data":"2、存储文件\\目录信息 包括权限 文件大小 等"}]},{"ID":"20230817161950-pddbk4q","Type":"NodeParagraph","Properties":{"id":"20230817161950-pddbk4q","updated":"20230817161950"},"Children":[{"Type":"NodeText","Data":"3、每个文件的数据块列表  包括每个文件被分成了多少个block块 每一块被存储到哪台机器上"}]},{"ID":"20230817161951-s2mwdff","Type":"NodeParagraph","Properties":{"id":"20230817161951-s2mwdff","updated":"20230817161951"},"Children":[{"Type":"NodeText","Data":"4、接受用户的操作请求  每个用户在操作hdfs时 就需要和namenode进行通信 因为NameNode上面存储着文件的相关信息"}]},{"ID":"20230817161952-daf7flq","Type":"NodeParagraph","Properties":{"id":"20230817161952-daf7flq","updated":"20230817161952"},"Children":[{"Type":"NodeText","Data":"NameNode主要包含 fsimage edits seen_txid version这几个文件"}]},{"ID":"20230817161953-omhzlle","Type":"NodeParagraph","Properties":{"id":"20230817161953-omhzlle","updated":"20230817161953"},"Children":[{"Type":"NodeText","Data":"fsimage 维护着整个文件目录树 文件\\目录的元信息 以及每个文件的数据块列表"}]},{"ID":"20230817161954-fe1c64m","Type":"NodeParagraph","Properties":{"id":"20230817161954-fe1c64m","updated":"20230817161954"},"Children":[{"Type":"NodeText","Data":"而edits文件主要用于记录正在上传文件的一些信息 其实fsimage的内容是通过secondarynamenode节点将eidts文件中block块信息精简到fsimage中"}]},{"ID":"20230817161955-qxauw1b","Type":"NodeParagraph","Properties":{"id":"20230817161955-qxauw1b","updated":"20230817161955"},"Children":[{"Type":"NodeText","Data":"seen_txid代表edits文件的尾数 在namenode重启时 会挨个检测对应文件 来保证数据的一致性"}]},{"ID":"20230817161956-y86ow8h","Type":"NodeParagraph","Properties":{"id":"20230817161956-y86ow8h","updated":"20230817161956"},"Children":[{"Type":"NodeText","Data":"VERSION主要存储的是集群的版本信息："}]},{"ID":"20230817161957-ig5222l","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockInfo":"c2hlbGw=","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230817161957-ig5222l","updated":"20230817161957"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","CodeBlockInfo":"c2hlbGw=","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"namespaceID=614519431\nclusterID=CID-bc130fd9-8550-4601-ba1a-2ab6bfaa1c6e\ncTime=1642914497530\nstorageType=NAME_NODE\nblockpoolID=BP-934528962-192.168.93.100-1642914497530\nlayoutVersion=-65\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230817161958-dbx9wh8","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161958-dbx9wh8","updated":"20230817161958"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"SecondaryNamenode介绍"}]},{"ID":"20230817161959-e2eyfe4","Type":"NodeParagraph","Properties":{"id":"20230817161959-e2eyfe4","updated":"20230817161959"},"Children":[{"Type":"NodeText","Data":"它主要负责定期将edits文件合并到fsimage中    SecondaryNamenode进程在hadoop集群中并不是必须的"}]},{"ID":"20230817161960-1fjmfjv","Type":"NodeParagraph","Properties":{"id":"20230817161960-1fjmfjv","updated":"20230817161960"},"Children":[{"Type":"NodeText","Data":"在HA架构中 他的文件合并操作会交给standby namenode负责"}]},{"ID":"20230817161961-gdfoe7l","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161961-gdfoe7l","updated":"20230817161961"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"DataNode介绍"}]},{"ID":"20230817161962-mfciy14","Type":"NodeParagraph","Properties":{"id":"20230817161962-mfciy14","updated":"20230817161962"},"Children":[{"Type":"NodeText","Data":"它主要提供真实文件数据的存储服务"}]},{"ID":"20230817161963-kkbntkk","Type":"NodeParagraph","Properties":{"id":"20230817161963-kkbntkk","updated":"20230817161963"},"Children":[{"Type":"NodeText","Data":"block ：hdfs会按照固定大小对文件进行分块 默认是128M  如果一个文件小于默认存储大小 该文件并不会占用整个数据块的存储空间"}]},{"ID":"20230817161964-7mh1h87","Type":"NodeParagraph","Properties":{"id":"20230817161964-7mh1h87","updated":"20230817161964"},"Children":[{"Type":"NodeText","Data":"replication：副本数量 表示数据有多少备份 默认是3"}]},{"ID":"20230817161965-t7mo69h","Type":"NodeParagraph","Properties":{"id":"20230817161965-t7mo69h","updated":"20230817161965"},"Children":[{"Type":"NodeText","Data":"副本的作用就是保证数据的安全性"}]},{"ID":"20230817161966-wsku5l9","Type":"NodeHeading","HeadingLevel":4,"Properties":{"id":"20230817161966-wsku5l9","updated":"20230817161966"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"#### ","Properties":{"id":""}},{"Type":"NodeText","Data":"NameNode总结"}]},{"ID":"20230817161967-ukvqz17","Type":"NodeParagraph","Properties":{"id":"20230817161967-ukvqz17","updated":"20230817161967"},"Children":[{"Type":"NodeText","Data":"namenode主要维护了两份关系："}]},{"ID":"20230817161968-c5i4dy6","Type":"NodeParagraph","Properties":{"id":"20230817161968-c5i4dy6","updated":"20230817161968"},"Children":[{"Type":"NodeText","Data":"第一份关系：文件与block list的关系 对应的关系文件存储在fsimage和edits两个文件中，当namenode启动时会把元数据加载到内存中"}]},{"ID":"20230817161969-5zcs76t","Type":"NodeParagraph","Properties":{"id":"20230817161969-5zcs76t","updated":"20230817161969"},"Children":[{"Type":"NodeText","Data":"第二份关系：DataNode与block之间的关系 在DataNode启动时会把block信息和节点信息上报给NameNode"}]}]}