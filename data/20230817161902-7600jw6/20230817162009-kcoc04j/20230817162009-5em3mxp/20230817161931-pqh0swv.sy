{"ID":"20230817161931-pqh0swv","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230817161931-pqh0swv","title":"slot vs parallelism","updated":"20230817161931"},"Children":[{"ID":"20230817161932-48ocwcq","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161932-48ocwcq","updated":"20230817161932"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"slot vs parallelism"}]},{"ID":"20230817161933-hwbf0dp","Type":"NodeParagraph","Properties":{"id":"20230817161933-hwbf0dp","updated":"20230817161933"},"Children":[{"Type":"NodeText","Data":"slot是静态的概念 是指taskmanager具有的并发执行能力"}]},{"ID":"20230817161934-f3ub2k3","Type":"NodeParagraph","Properties":{"id":"20230817161934-f3ub2k3","updated":"20230817161934"},"Children":[{"Type":"NodeText","Data":"parallelism是动态的概念 是指flink程序运行时实际使用的并发能力"}]},{"ID":"20230817161935-2x7cbzb","Type":"NodeParagraph","Properties":{"id":"20230817161935-2x7cbzb","updated":"20230817161935"},"Children":[{"Type":"NodeText","Data":"设置合适的parallelism能提高程序计算效率"}]},{"ID":"20230817161936-zhfinrx","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161936-zhfinrx","updated":"20230817161936"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"并行度(Parallel)"}]},{"ID":"20230817161937-9fu0uoe","Type":"NodeParagraph","Properties":{"id":"20230817161937-9fu0uoe","updated":"20230817161937"},"Children":[{"Type":"NodeText","Data":"一个Flink程序由多个组件组成(Source、Transformation和 Sink)。 一个组件由多个并行实例(线程)来执行， 一个组件的并行实例(线程)数目就被称为该组件的并行度。"}]},{"ID":"20230817161938-t4kpnws","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161938-t4kpnws","updated":"20230817161938"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"TaskManager与Slot"}]},{"ID":"20230817161939-xhjyngs","Type":"NodeParagraph","Properties":{"id":"20230817161939-xhjyngs","updated":"20230817161939"},"Children":[{"Type":"NodeText","Data":"Flink的每个TaskManager为集群提供Solt， Solt的数量通常与每个TaskManager节点的可用CPU数量成比例，一般情况下Slot的数量就是每个节点的可用CPU数量。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bb6f09a47f2e14140474.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161940-oxa48dr","Type":"NodeParagraph","Properties":{"id":"20230817161940-oxa48dr","updated":"20230817161940"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bb750900730614360663.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161941-53kh0o6","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161941-53kh0o6","updated":"20230817161941"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"并行度的设置"}]},{"ID":"20230817161942-23k80qa","Type":"NodeParagraph","Properties":{"id":"20230817161942-23k80qa","updated":"20230817161942"},"Children":[{"Type":"NodeText","Data":"Flink任务的并行度可以通过4个层面来设置。"}]},{"ID":"20230817161943-bnw6y7c","Type":"NodeList","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161943-bnw6y7c","updated":"20230817161943"},"Children":[{"ID":"20230817161944-ykfyd29","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161944-ykfyd29","updated":"20230817161944"},"Children":[{"ID":"20230817161945-fp90moj","Type":"NodeParagraph","Properties":{"id":"20230817161945-fp90moj","updated":"20230817161945"},"Children":[{"Type":"NodeText","Data":"Operator Level（算子层面）"}]}]},{"ID":"20230817161946-og407ku","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161946-og407ku","updated":"20230817161946"},"Children":[{"ID":"20230817161947-nvvoiok","Type":"NodeParagraph","Properties":{"id":"20230817161947-nvvoiok","updated":"20230817161947"},"Children":[{"Type":"NodeText","Data":"Execution Environment Level（执行环境层面）"}]}]},{"ID":"20230817161948-8om5h2o","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161948-8om5h2o","updated":"20230817161948"},"Children":[{"ID":"20230817161949-m7yi04l","Type":"NodeParagraph","Properties":{"id":"20230817161949-m7yi04l","updated":"20230817161949"},"Children":[{"Type":"NodeText","Data":"Client Level（客户端层面）"}]}]},{"ID":"20230817161950-rjplzmr","Type":"NodeListItem","Data":"-","ListData":{"Tight":true,"BulletChar":45,"Padding":2,"Marker":"LQ==","Num":-1},"Properties":{"id":"20230817161950-rjplzmr","updated":"20230817161950"},"Children":[{"ID":"20230817161951-4mcrk9d","Type":"NodeParagraph","Properties":{"id":"20230817161951-4mcrk9d","updated":"20230817161951"},"Children":[{"Type":"NodeText","Data":"System Level（系统层面）"}]}]}]},{"ID":"20230817161952-72caxup","Type":"NodeParagraph","Properties":{"id":"20230817161952-72caxup","updated":"20230817161952"},"Children":[{"Type":"NodeText","Data":"这些并行度优先级为"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"Operator Level\u0026gt;Execution Environment Level\u0026gt;Client Level\u0026gt;System Level"}]},{"ID":"20230817161953-6fkiwbl","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161953-6fkiwbl","updated":"20230817161953"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"并行度设置之Operator Level"}]},{"ID":"20230817161954-g08cprg","Type":"NodeParagraph","Properties":{"id":"20230817161954-g08cprg","updated":"20230817161954"},"Children":[{"Type":"NodeText","Data":"算子、数据源和目的地的并行度可以通过调用 setParallelism()方法来指定"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bb9a09ab1a1b06810222.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161955-jpqxx4q","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161955-jpqxx4q","updated":"20230817161955"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"并行度设置之Execution Environment Level"}]},{"ID":"20230817161956-xhg9bxg","Type":"NodeParagraph","Properties":{"id":"20230817161956-xhg9bxg","updated":"20230817161956"},"Children":[{"Type":"NodeText","Data":"执行环境层面的并行度可以通过调用setParallelism()方法指定。为了以并行度3来执行所有的算子、数据源和目的地， 可以通过如下的方式设置执行环境的并行度"}]},{"ID":"20230817161957-wtnjmkk","Type":"NodeBlockquote","Properties":{"id":"20230817161957-wtnjmkk","updated":"20230817161957"},"Children":[{"Type":"NodeBlockquoteMarker","Data":"\u003e ","Properties":{"id":""}},{"ID":"20230817161958-dlsvdhy","Type":"NodeParagraph","Properties":{"id":"20230817161958-dlsvdhy","updated":"20230817161958"},"Children":[{"Type":"NodeText","Data":"注意：执行环境的并行度可以通过显式设置算子的并行度而被重写。"}]}]},{"ID":"20230817161959-qmocj4z","Type":"NodeParagraph","Properties":{"id":"20230817161959-qmocj4z","updated":"20230817161959"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bba809bfb70b06820151.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161960-6h6tsx7","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161960-6h6tsx7","updated":"20230817161960"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"并行度设置之Client Level"}]},{"ID":"20230817161961-u1ckvps","Type":"NodeParagraph","Properties":{"id":"20230817161961-u1ckvps","updated":"20230817161961"},"Children":[{"Type":"NodeText","Data":"并行度还可以在客户端提交Job时设定。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"通过-p参数指定并行度。"}]},{"ID":"20230817161962-qgaayg1","Type":"NodeCodeBlock","IsFencedCodeBlock":true,"CodeBlockFenceChar":96,"CodeBlockFenceLen":3,"CodeBlockOpenFence":"YGBg","CodeBlockCloseFence":"YGBg","Properties":{"id":"20230817161962-qgaayg1","updated":"20230817161962"},"Children":[{"Type":"NodeCodeBlockFenceOpenMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}},{"Type":"NodeCodeBlockFenceInfoMarker","Properties":{"id":""}},{"Type":"NodeCodeBlockCode","Data":"bin/flink run -p 10 FlinkDemo.jar\n代码块1\n","Properties":{"id":""}},{"Type":"NodeCodeBlockFenceCloseMarker","Data":"```","CodeBlockFenceLen":3,"Properties":{"id":""}}]},{"ID":"20230817161963-gf40euz","Type":"NodeParagraph","Properties":{"id":"20230817161963-gf40euz","updated":"20230817161963"},"Children":[{"Type":"NodeText","Data":"这里表示把并行度设置为10。"}]},{"ID":"20230817161964-k6qql5r","Type":"NodeHeading","HeadingLevel":3,"Properties":{"id":"20230817161964-k6qql5r","updated":"20230817161964"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"### ","Properties":{"id":""}},{"Type":"NodeText","Data":"并行度设置之System Level"}]},{"ID":"20230817161965-m2yelsh","Type":"NodeParagraph","Properties":{"id":"20230817161965-m2yelsh","updated":"20230817161965"},"Children":[{"Type":"NodeText","Data":"在系统层面可以通过设置"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"flink-conf.yaml"},{"Type":"NodeText","Data":"文件中的"},{"Type":"NodeTextMark","Properties":{"id":""},"TextMarkType":"code","TextMarkTextContent":"parallelism.default"},{"Type":"NodeText","Data":"属性来指定所有执行环境的默认并行度。"}]},{"ID":"20230817161966-etor9mi","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20230817161966-etor9mi","updated":"20230817161966"},"Children":[{"Type":"NodeHeadingC8hMarker","Data":"## ","Properties":{"id":""}},{"Type":"NodeText","Data":"并行度案例分析"}]},{"ID":"20230817161967-uimoqzl","Type":"NodeParagraph","Properties":{"id":"20230817161967-uimoqzl","updated":"20230817161967"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bbe90971e3d916160809.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bc4109beee7a16220801.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230817161968-uyisone","Type":"NodeParagraph","Properties":{"id":"20230817161968-uyisone","updated":"20230817161968"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bc4809ee247916200905.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bc4d09b3ca7916210901.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"图片描述","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"https://img.mukewang.com/wiki/5f86bc530950819e18510833.jpg","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]}]}