{"ID":"20230819115045-lfoqop0","Spec":"1","Type":"NodeDocument","Properties":{"id":"20230819115045-lfoqop0","scroll":"\u0026#123;\u0026quot;rootId\u0026quot;:\u0026quot;20230819115045-lfoqop0\u0026quot;,\u0026quot;startId\u0026quot;:\u0026quot;20230819115046-m1gwp37\u0026quot;,\u0026quot;endId\u0026quot;:\u0026quot;20230819115055-di2482i\u0026quot;,\u0026quot;scrollTop\u0026quot;:0,\u0026quot;focusId\u0026quot;:\u0026quot;20230819115046-m1gwp37\u0026quot;,\u0026quot;focusStart\u0026quot;:0,\u0026quot;focusEnd\u0026quot;:0\u0026#125;","title":"MR数据迁移需求分析","updated":"20230824163448"},"Children":[{"ID":"20230819115046-m1gwp37","Type":"NodeParagraph","Properties":{"id":"20230819115046-m1gwp37","updated":"20230819115046"},"Children":[{"Type":"NodeText","Data":"一、背景说明"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"5G集群上MR数据已接入。通过UCX接入的数据会临时存储在TMP目录下，需要按照规范目录进行搬移。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"源目录"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"hdfs://5ghadoop2/OriginalData/OSS/MR/QH/TMP"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"hdfs://5ghadoop2/OriginalData/OSS/MDT/QH/TMP"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"hdfs://5ghadoop2/OriginalData/BSS/INF_BP/04040/TMP"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"hdfs://5ghadoop2/OriginalData/BSS/INF_BP/04041/TMP"}]},{"ID":"20230819115047-ex1soet","Type":"NodeParagraph","Properties":{"id":"20230819115047-ex1soet","updated":"20230819115047"},"Children":[{"Type":"NodeText","Data":"规范目录"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"hdfs://5ghadoop2/OriginalData/BSS/INF_BP/04040/11200"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"hdfs://5ghadoop2/OriginalData/BSS/INF_BP/04041/11200"}]},{"ID":"20230819115048-hufh6c8","Type":"NodeParagraph","Properties":{"id":"20230819115048-hufh6c8","updated":"20230819115048"},"Children":[{"Type":"NodeImage","Properties":{"id":""},"Children":[{"Type":"NodeBang","Data":"!","Properties":{"id":""}},{"Type":"NodeOpenBracket","Data":"[","Properties":{"id":""}},{"Type":"NodeLinkText","Data":"img","Properties":{"id":""}},{"Type":"NodeCloseBracket","Data":"]","Properties":{"id":""}},{"Type":"NodeOpenParen","Data":"(","Properties":{"id":""}},{"Type":"NodeLinkDest","Data":"assets/img-20230819115056-d26k7t6.png","Properties":{"id":""}},{"Type":"NodeCloseParen","Data":")","Properties":{"id":""}}]}]},{"ID":"20230819115049-72k8349","Type":"NodeParagraph","Properties":{"id":"20230819115049-72k8349","updated":"20230819115049"},"Children":[{"Type":"NodeText","Data":"二、当前的任务"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"二期二已有现成的搬移脚本，请更新到5G集群。"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"二期二集群有4个搬移脚本 04040_MR，04041_MDT，MDT_QH，MR_QH和两个删除脚本delete_mdtmr_files_04040 delete_mdtmr_files_04041"}]},{"ID":"20230819115050-ehp9cgh","Type":"NodeParagraph","Properties":{"id":"20230819115050-ehp9cgh","updated":"20230819115050"},"Children":[{"Type":"NodeText","Data":"搬移至5G集群也需要4个迁移2个删除，可部署在153.16服务器"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"5GDPI_04040_MR，5GDPI_04041_MDT，MDT_QH，MR_QH"}]},{"ID":"20230819115051-nc34u0e","Type":"NodeParagraph","Properties":{"id":"20230819115051-nc34u0e","updated":"20230819115051"},"Children":[{"Type":"NodeText","Data":"三、最终效果"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"1、按要求将数据目录迁移至规范的目录下"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"2、TMP目录下历史数据需要定时清理最多保留7天"},{"Type":"NodeSoftBreak","Data":"\n","Properties":{"id":""}},{"Type":"NodeText","Data":"3、规范目录下历史数据保留1个月"}]},{"ID":"20230819115052-kc8j9bq","Type":"NodeParagraph","Properties":{"id":"20230819115052-kc8j9bq","updated":"20230819115052"},"Children":[{"Type":"NodeText","Data":"需求分析要点"}]},{"ID":"20230824162524-3jqpqjt","Type":"NodeParagraph","Properties":{"id":"20230824162524-3jqpqjt","updated":"20230824162717"},"Children":[{"Type":"NodeText","Data":"规范目录 细分为地区 天 小时"}]},{"ID":"20230824162548-5cx0flj","Type":"NodeParagraph","Properties":{"id":"20230824162548-5cx0flj","updated":"20230824162812"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"hdfs://5ghadoop2/OriginalData/BSS/INF_BP/04040/11200/20230818/2023081800"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230824162806-63q5nij","Type":"NodeParagraph","Properties":{"id":"20230824162806-63q5nij","updated":"20230824162806"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"hdfs://5ghadoop2/OriginalData/BSS/INF_BP/04041/11200/20230818/2023081800"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230819115053-2e5i5bh","Type":"NodeParagraph","Properties":{"id":"20230819115053-2e5i5bh","updated":"20230819115053"},"Children":[{"Type":"NodeText","Data":"迁移分析"}]},{"ID":"20230824162410-y3qr5lo","Type":"NodeParagraph","Properties":{"id":"20230824162410-y3qr5lo","updated":"20230824162507"},"Children":[{"Type":"NodeText","Data":"MR_QH  MDT_QH (既包含转移文件 又包含删除文件)"}]},{"ID":"20230824162508-t8zrjzf","Type":"NodeParagraph","Properties":{"id":"20230824162508-t8zrjzf","updated":"20230824163429"},"Children":[{"Type":"NodeText","Data":"04040_MR 04041_MDT只迁移MR文件 剩余文件可以删除(这里可以写两个脚本 分别对04040和04041的tmp下非MR、MDT文件进行删除"},{"Type":"NodeBackslash","Data":"span","Children":[{"Type":"NodeBackslashContent","Data":")"}]},{"Type":"NodeText","Data":"  每天执行一次"}]},{"ID":"20230824162955-g45wabw","Type":"NodeParagraph","Properties":{"id":"20230824162955-g45wabw","updated":"20230824163013"},"Children":[{"Type":"NodeText","Data":"delete_04040_tmp delete_04041_tmp"}]},{"ID":"20230824163028-hqjvlh8","Type":"NodeParagraph","Properties":{"id":"20230824163028-hqjvlh8","updated":"20230824163123"},"Children":[{"Type":"NodeText","Data":"标准目录 只保留30天 那就需要扫描这个路径"},{"Type":"NodeTextMark","TextMarkType":"code","TextMarkTextContent":"hdfs://5ghadoop2/OriginalData/BSS/INF_BP/04040"},{"Type":"NodeText","Data":"​"}]},{"ID":"20230824163026-b7mpazq","Type":"NodeParagraph","Properties":{"id":"20230824163026-b7mpazq","updated":"20230824163448"},"Children":[{"Type":"NodeText","Data":"将大于30天的日期文件夹删除即可 一个月执行一次"}]},{"ID":"20230824163142-eozqn5i","Type":"NodeParagraph","Properties":{"id":"20230824163142-eozqn5i","updated":"20230824163213"},"Children":[{"Type":"NodeText","Data":"delete_04040_standard、delete_04041_standard"}]}]}